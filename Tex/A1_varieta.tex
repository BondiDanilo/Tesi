\section{Varietà differenziali}\label{sec:vardiff}
Per una trattazione completa degli argomenti accennati in questa appendice
si vedano le referenze.
%------------------------------------------------------------------------------%
%------------------------------------------------------------------------------%
\subsection{Definizioni}
Se una funzione $f$ continua/$C^k$-differenziabile è invertibile e la sua inversa $f^{-1}$
è anch'essa continua/$C^k$-differenziabile allora
$f$ è detta un \textbf{omeomorfismo/diffeomorfismo}.\\
Se tra due spazi topolgici esiste un omeomorfismo/diffeomorfismo, i due si dicono
omeomorfi/diffeomorfi.\\
Nel seguito viene usato "differenziabile" come sinonimo di "$C^\infty$", senza
perdita di generalità della trattazione.

\begin{definition}{(Varietà differenziale)}
\label{def:var_differenziale}
   Sia $(M ,T)$ uno spazio topologico. $M$ è detto una \textbf{varietà
   differenziale} si rispetta le seguenti proprietà:
  \begin{itemize}
     \item (Proprietà di Hausdorff) Punti distinti di $M$ hanno intorni disgiunti
     $$\forall x_\alpha,x_\beta \in M, \: x_\alpha \neq x_\beta , \:
       \exists A_\alpha , A_\beta \in T \: (x_\alpha \in A_\alpha , \:
       x_\beta \in A_\beta),
       \: \mathrm{t.c.} \: A_\alpha \cap A_\beta = \varnothing $$

     \item (Localmente n-Euclideo) Ciascun punto di $M$ ha un intorno che è
     diffeomorfo a un aperto di $\R^n$.
     $$
       \forall x \in M \: \exists U \in T \:,\: \exists\phi : U \to \R^n
          \mathrm{\: t.c.\:} \phi \mathrm{\: diffeomorfismo}
     $$
     La coppia $(U,\phi)$ è detta \emph{intorno coordinato} o \emph{carta}.
     Le carte devono essere a due a due \emph{compatibili} (si veda sotto).\\
     Il numero $n$ è detto la \emph{dimensione} della varietà. Si può dimostrare che è unico.

     \item (Secondo assioma di Numerabilità) Lo spazio $M$ ha una base della topologia
     con cardinalità numerabile.
  \end{itemize}
\end{definition}

Una famiglia di carte $\mathcal{A} = \{ (U_\alpha , \phi_\alpha) \}$ è detta
\emph{atlante} se rispetta le seguenti proprietà:
\begin{itemize}
    \item L'insieme degli intorni $\{U_\alpha\}$ ricopre $X$ :
        $X \subset \bigcup \limits_\alpha U_\alpha$
    \item Gli intorni coordinati sono a due a due \emph{compatibili}: per ogni coppia
    di intorni coordinati
       $(U_\alpha , \phi_\alpha), (U_\beta , \phi_\beta) \mathrm{\:t.c.\:} \:
       U_\alpha \cap U_\beta \neq \varnothing $
    le funzioni di transizione (cambio di coordinate) $\psi$ sono diffeomorfismi.
    \begin{equation*}
        \begin{split}
           \psi = \phi_\beta \circ \phi_\alpha &: \phi_\alpha(U_\alpha \cap U_\beta)
              \to \phi_\beta (U_\alpha \cap U_\beta) \\
           \psi^{-1} = \phi_\alpha \circ \phi_\beta &: \phi_\beta(U_\alpha \cap U_\beta)
              \to \phi_\alpha (U_\alpha \cap U_\beta) \\
        \end{split}
    \end{equation*}
\end{itemize}
Si veda \cite{sernesi} per esempi di varietà differenziali.\\

La compatibilità tra due carte è una relazione di equivalenza. L'insieme delle
classi di equivalenza di compatibilità è detto \emph{struttura differenziale}.

Di norma non vi è un unico atlante che appartiene a una struttura differenziale,
ma si dimostra che dato un'atlante è unica la struttura differenziale a cui appartiene.\\

Si sottolinea che una varietà differenziale è uno spazio che può essere descritto
localmente con un sistema di coordinate euclidee. Studiando un problema su una
varietà differenziale, è quindi sufficiente applicare le mappe $\phi$ e riportare
il problema in uno spazio euclideo, potendo applicare quindi tutti i metodi
noti di Analisi. Nel seguito l'espressione "in coordinate locali" significherà esattamente
questo: Data la varietà $M$, scelta una carta $(U,\phi)$, si studia il problema
su $\phi(U) \subset \R ^n$.\\

Siano $R^+ = \{(x_1, \dots, x_n) \in \R^n \tc x_n > 0 \}$ (che è omeomrfo a $\R^n$) e
$R^0 = \{(x_1, \dots, x_n) \in \R^n \tc x_n = 0 \}$
\begin{definition}{(Varietà con bordo):}
   Una varietà $M$ si dice varietà con bordo se le funzioni coordinate sono definite
   a valori non in $\R^n$, ma in $R^+ \cup R^0$. La controimmagine di $R^0$ secondo
   tutte le funzioni coordinate di un atlante è detta \emph{bordo della varietà}
   e si indica con $\partial M$. Il bordo è una sottovarietà di dimensione $n-1$.
\end{definition}

%------------------------------------------------------------------------------%
%------------------------------------------------------------------------------%
\subsection{Spazio tangente e cotangente}
Si vuole generalizzare la nozione di vettore tangente ad uno spazio
$M \subset \R^n$ (si pensi pure a una superficie in $\R^3$
o una curva in $\R^2$). Un vettore identifica univocamente una direzione
in $\R^n$. Si vuole associare ad ogni vettore l'operazione derivata direzionale
lungo la direzione individuata dal vettore, valutata nel punto $p \in \R^n$.\\
Scelta una base $\{\vec e _i\}$ di $\R^n$, ogni vettore $\vec v \in \R^n$
si può esprimere in maniera unica come combinazione lineare degli elementi della base
$$ \vec v = v_1\vec e _1 + \dots + v_n\vec e _n $$
Sia $f$ una funzione differenziabile definita in un opportuno intorno $U$ del punto $p$
(per semplicità nel seguito si indica con $C^\infty(p)$ l'insieme delle funzioni lisce definite su
opportuni intorni del punto $p \in \R^n$).\\
La derivata direzionale di $f$ lungo $\vec v$ è quindi data da
   $$ \left. \frac{\partial f}{\partial \vec v} \right |_p =
         \left. v_1\frac{\partial f}{\partial x_1} \right |_p + \dots +
         \left. v_n\frac{\partial f}{\partial x_n} \right |_p $$
Inoltre, per le proprietà delle derivate $\forall \alpha,\beta \in \R$
e $\forall f,g \in C^\infty(p)$:
$$
      \left. \frac{\partial}{\partial \vec v}(\alpha f + \beta g) \right |_p
         = \alpha \left. \frac{\partial f}{\partial \vec v} \right |_p +
           \beta  \left. \frac{\partial g}{\partial \vec v} \right |_p
      \quad \mathrm{e} \quad
      \left. \frac{\partial}{\partial \vec v}(fg) \right |_p
         = \left. \frac{\partial f}{\partial \vec v} \right |_p g(p) +
           \left. f(p)\frac{\partial g}{\partial \vec v} \right |_p
$$
Il vettore $\vec v$ è allora individuato in maniera univoca dal modo in cui agisce
la derivata direzionale su tutte le funzioni differenziabili in un intorno di $p$.
Si definisce allora il \emph{vettore tangente} alla varietà $M$ nel punto $p$:
\begin{definition}{(Vettore tangente)}
      Sia $M$ una varietà differenziale e $p \in M$. Si dice \emph{vettore tangente}
      a $X$ nel punto $p$ un'applicazione $\vec V _p : C^\infty(p) \to \R$ tale che:
      \begin{itemize}
         \item $\vec V _p[\alpha f + \beta g] = \alpha \vec V _p[f] + \beta \vec V_p [g]
            \quad \forall f,g \in C^\infty(p) \mathrm{\:e\:} \forall \alpha,\beta \in \R$
         \item $\vec V _p [fg] = \vec V _p[f] g(p) + f(g)\vec V _p [g]
            \quad \forall f,g \in C^\infty(p)$
      \end{itemize}
\end{definition}
L'insieme dei vettori tangenti a una varietà $M$ nel punto $p$ è detto
\textbf{spazio tangente} alla varietà nel punto $p$ e si indica con $T_p(M)$.
Si può mostrare facilmente che $T_p(M)$ è uno spazio vettoriale.\\

Si definisce \textbf{spazio cotangente} $T_p^*(M)$ a una varietà $M$ nel punto
$p \in M$ il duale\footnote{
   Si ricorda che il duale $V^*$ di uno spazio vettoriale $V$ è l'insieme
   delle applicazioni lineari $\phi : V \to \R$. Data una base $\{e_i\}$ di $V$,
   la base canonica per $V^*$ è definita dalle proiezioni nella i-esima coordinata $\dd x^i$,
   quindi $\dd x^i(e_j)=\delta^i_j$. Data una qualsiasi $\phi\in V^*$ applicazione lineare
   su $V$, si ha $\phi = \sum_i a_i \dd x^i$ per $\{a_i\}\in\R$. }
dello spazio tangente $T_p(M)$.\\

Data una base di $\R^n$ si definiscono:
\begin{itemize}
   \item $ e_i = \left. \frac{\partial}{\partial x_i}\right |_p $
      le derivate parziali lungo la coordinata i-esima sono base di $T_p(M)$.
   \item $ e^i = \dd x^i $ gli elementi di linea differenziali lungo la
      coordinata i-esima sono base di $T_p^*(M)$.
\end{itemize}

Si definisce \textbf{campo vettoriale} un'applicazione che a un punto $p$
della varietà $M$ associa un vettore tangente al punto. Si vuole richiedere anche
una dipendenza continua o liscia dal punto base $p$\footnote{Si veda \ref{sec:fibratotangente}
per chiarificare questa affermazione.}.
Lo spazio dei campi vettoriali sulla varietà $M$ si indica con $\mathcal{X}(M)$
$$ \vec V : M \to T_p(M) \: ,\: p \mapsto \vec V _p $$

%------------------------------------------------------------------------------%
\subsection{Mappe tra varietà}
Sia $F : M \to N$ una mappa tra le due varietà differenziali $M$ e $N$.
Sia $(U,\phi)$ una carta per $M$ e $(V,\psi)$ una carta per $N$. Sia $p \in U$ e
$q = F(p) \in V$.

\begin{definition}
   La mappa $F$ è detta differenziabile in $p$ se è differenziabile
   in senso tradizionale la mappa tra gli aperti di $\R^m$ e
   $\R^n$
   $$ f : \phi(U) \to \psi(V) \quad , \quad f = \psi \circ F \circ \phi^{-1} $$
\end{definition}

\begin{definition}
   Una mappa $F : M \to N$ tra due varietà induce una mappa
   $F_* : T_p M \to T_q N$ tra gli spazi tangenti denominata
   \textbf{mappa differenziale} e una mappa
   $F^* : T^*_q N \to T^*_p M$ tra gli spazi cotangenti denominata
   \textbf{pullback}, definite da:
   \begin{equation}
      \begin{aligned}
         (F_*X)_q [g] & := X_p [g \circ F] \\
         F_*\omega (X_p) & := \omega (F_* X_p)
      \end{aligned}
   \end{equation}
   per ogni vettore $X_p \in T_p M$, ogni forma $\omega \in T^*_q N$,
   ogni funzione $g \in C^\infty(N)$ e  ogni $p \in M$ e $q=F(p) \in N$.
\end{definition}


Siano $F : M \to N$, $G : N \to O$ e $G \circ F : M \to O$, vale che
$$
   (G \circ F)_* = G_* \circ F_* \quad \mathrm{e} \quad
   (G \circ F)^* = F^* \circ G^*
$$

Si noti che la mappa differenziale agisce nella stessa direzione di $F$ (covariante),
mentre il pullback agisce in direzione opposta (controvariante).
